<!doctype html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
</head>

<body>
    <script type="module">
        import init, { ConversationMessage, User } from "./pkg/web3mq_mls.js";
        init().then(() => {
            console.log("init success");
            // 1. get the user 
            try {
                let loadedUser = User.load("user_id");
                console.log("loaded user", loadedUser);
            } catch (error) {
                let createdUser = new User("user_id");
                console.log("created user", createdUser);
                createdUser.enable_auto_save();
                createdUser.register();
            }

            // // 2. create group 
            // user.create_group('test-group');

            // // 3. invite user 
            // user.update_clients();
            // // call invite api fristly.
            // user.inivite("target_user_id", "group_id");

            // // when enter group    
            // user.update('group_id');

            // // 4. send message 
            // // call ws send message 
            // user.send_msg('hello!', 'group_id');

            // // 5. receive message
            // // handle the message 

            // // user.register();

            // // 6. remove a user 
            // user.remove("user_id", "group_id");

        });
    </script>
</body>

</html>